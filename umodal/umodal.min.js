$(document).ready(function(){function o(){$("body").removeClass("umodal-disable-scroll").css({paddingRight:0}),$(".umodal").css({paddingRight:0}),$(window).scrollTop(umodalScrollTop)}$(window).resize(function(){$(".umodal__image").css("max-height","initial").css("max-height",$(".umodal__content").height()+"px")}),$(".umodal__open").on("click",function(a){a.preventDefault();var d=window.innerWidth-$(document).width();window.umodalScrollTop=$(window).scrollTop(),setTimeout(function(){$("body").addClass("umodal-disable-scroll").css({paddingRight:d,top:-umodalScrollTop}),$(".umodal").css({paddingRight:d})},200);var l=$(this).attr("umodal-id"),i=$(this).attr("umodal-src"),e=$(this).attr("href"),t=$(this).attr("umodal-content");if(void 0!=e)e.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jpg|jpeg|png|bmp|gif|webp|ico|svg)((\?|#).*)?$)/i);$('<div class="umodal umodal_loading"><div class="umodal__inner"><button class="umodal__close"></button><div class="umodal__content"></div></div></div>').appendTo("body").hide().fadeIn(200);var n=$(".umodal .umodal__content");if(void 0!=l&&null!=l){$(".umodal").removeClass("umodal_loading");var u=$($('[umodal-id="'+l+'"]:not(.umodal__open)').parents()[0]);$('[umodal-id="'+l+'"]:not(.umodal__open)').appendTo(n),$(".umodal__close").click(function(){$(".umodal").fadeOut(200,function(){$(".umodal__content [umodal-id]").appendTo(u),$(this).remove()}),o()})}else void 0==i?($(".umodal").addClass("umodal_inverse umodal_image"),n.html('<img src="'+e+'" class="umodal__image">'),$(".umodal__image").on("load",function(){$(this).addClass("umodal__image_show"),setTimeout(function(){$(".umodal").removeClass("umodal_loading")},30),$(window).resize()}),$(".umodal__image").on("error",function(){n.html("Не удалось загрузить изображение").fadeIn(200),$(".umodal").removeClass("umodal_loading")})):void 0!=t?n.hide().load(i+" "+t,function(o,a,d){"error"==a&&$(this).html("Не удалось загрузить содержимое: "+d.status+" "+d.statusText),$(this).fadeIn(200),setTimeout(function(){$(".umodal").removeClass("umodal_loading")},30)}):(n.hide(),$.ajax({url:i,type:"GET",success:function(o){var a=o.replace(/\r\n|\r|\n/g,"").match("<body[^>]*>(.*?)</body>")[0];n.html(a).fadeIn(200),setTimeout(function(){$(".umodal").removeClass("umodal_loading")},30)},error:function(o){n.html("Не удалось загрузить содержимое").fadeIn(200),setTimeout(function(){$(".umodal").removeClass("umodal_loading")},30)}})),$(".umodal .umodal__close").click(function(){$(".umodal").fadeOut(200,function(){$(this).remove()}),o()});$(".umodal__close").attr("title","Закрыть [Esc]"),$(document).keyup(function(o){27===o.keyCode&&$(".umodal .umodal__close").click()})})});
