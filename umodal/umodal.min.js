$(document).ready(function(){function o(){$("body").removeClass("umodal-disable-scroll").css("padding-right","0"),$(".umodal_show").css({paddingRight:0}),$(window).scrollTop(umodalScrollTop)}var a=window.innerWidth-$(document).width();$(window).resize(function(){$(".umodal_show .umodal__image").css("max-height","initial").css("max-height",$(".umodal_show .umodal__content").height()+"px")}),$(".umodal__open").click(function(l){l.preventDefault(),window.umodalScrollTop=$(window).scrollTop(),setTimeout(function(){$("body").addClass("umodal-disable-scroll").css({paddingRight:a,top:-umodalScrollTop}),$(".umodal_show").css({paddingRight:a})},200);var d=$(this).attr("umodal-id"),s=$(this).attr("umodal-src"),i=$(this).attr("href"),t=$(this).attr("umodal-content");if(null!=i)var e=i.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jpg|jpeg|png|bmp|gif|webp|ico|svg)((\?|#).*)?$)/i);if(null==s&&null==e)$('.umodal[umodal-id="'+d+'"]').addClass("umodal_show").hide().fadeIn(200),$(".umodal__close").click(function(){$(this).closest(".umodal").fadeOut(200,function(){$(this).removeClass("umodal_show")}),o()});else{$('<div class="umodal"><div class="umodal__inner"><button class="umodal__close"></button><div class="umodal__content"></div></div></div>').appendTo("body").hide().addClass("umodal_show umodal_loading").fadeIn(200);var u=$(".umodal_show .umodal__content");null==s?($(".umodal_show").addClass("umodal_inverse umodal_image"),u.html('<img src="'+i+'" class="umodal__image">'),u.children(".umodal__image").on("load",function(){$(".umodal__image").addClass("umodal__image_show"),setTimeout(function(){$(".umodal_show").removeClass("umodal_loading")},30),$(window).resize()}),u.children(".umodal__image").on("error",function(){u.html("Не удалось загрузить изображение").fadeIn(200),$(".umodal_show").removeClass("umodal_loading")})):u.hide().load(s+" "+t,function(o,a,l){"error"==a&&$(this).html("Не удалось загрузить содержимое: "+l.status+" "+l.statusText),$(this).fadeIn(200),$(".umodal_show").removeClass("umodal_loading")}),$(".umodal_show .umodal__close").click(function(){$(this).closest(".umodal").fadeOut(200,function(){$(this).remove()}),o()})}$(".umodal__close").attr("title","Закрыть [Esc]"),$(document).keyup(function(o){27===o.keyCode&&$(".umodal_show .umodal__close").click()})})});
